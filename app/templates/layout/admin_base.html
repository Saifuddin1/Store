<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Admin | MyStore{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet">
</head>

<body>

{% if current_user.is_authenticated and current_user.is_admin %}

<!-- ===================== -->
<!-- TOP ADMIN NAVBAR -->
<!-- ===================== -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid">

    <a class="navbar-brand d-flex align-items-center"
      href="{{ url_for('admin.dashboard') }}">
      {% if site_settings and site_settings.logo_light %}
        <img src="{{ url_for('static', filename=site_settings.logo_light) }}"
            height="40"
            width="100"
            class="me-2"
            alt="{{ site_settings.site_name }}">
      {% endif %}
      <span class="fw-semibold">{{ site_settings.site_name }}</span>
    </a>


    <button class="navbar-toggler" type="button"
            data-bs-toggle="collapse"
            data-bs-target="#adminNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="adminNavbar">
      <ul class="navbar-nav ms-auto">

        <li class="nav-item">
          <a class="nav-link
             {% if request.endpoint == 'admin.dashboard' %}active fw-semibold text-white{% endif %}"
             href="{{ url_for('admin.dashboard') }}">
            ğŸ“Š Dashboard
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link
             {% if request.endpoint == 'admin.analytics_dashboard' %}active fw-semibold text-white{% endif %}"
             href="{{ url_for('admin.analytics_dashboard') }}">
            ğŸ“ˆ Analytics
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link
             {% if request.endpoint == 'admin.orders' %}active fw-semibold text-white{% endif %}"
             href="{{ url_for('admin.orders') }}">
            ğŸ“¦ Orders
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link
             {% if request.endpoint == 'admin.products' %}active fw-semibold text-white{% endif %}"
             href="{{ url_for('admin.products') }}">
            ğŸ›’ Products
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link text-warning"
             href="{{ url_for('auth.logout') }}">
            Logout
          </a>
        </li>

      </ul>
    </div>
  </div>
</nav>

<!-- ===================== -->
<!-- ADMIN LAYOUT -->
<!-- ===================== -->
<div class="container-fluid">
  <div class="row">

    <!-- ===== SIDEBAR ===== -->
    <aside class="col-md-3 col-lg-2 bg-white border-end min-vh-100 p-3">

      <!-- Sidebar Header -->
      <div class="mb-4">
        <h6 class="fw-bold mb-1 text-primary">ğŸ›  Admin Panel</h6>
      </div>

      <div class="list-group list-group-flush">

        <a href="{{ url_for('admin.edit_about_page') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.edit_about_page' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">â„¹ï¸</span>
          <span>About Page</span>
        </a>

        <a href="{{ url_for('admin.faq_list') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.faq_list' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">â“</span>
          <span>FAQs</span>
        </a>

        <a href="{{ url_for('admin.edit_terms_conditions') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.edit_terms_conditions' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">ğŸ“œ</span>
          <span>Terms & Conditions</span>
        </a>

        <a href="{{ url_for('admin.edit_shipping_returns') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.edit_shipping_returns' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">ğŸšš</span>
          <span>Shipping & Returns</span>
        </a>

        <a href="{{ url_for('admin.edit_privacy_policy') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.edit_privacy_policy' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">ğŸ”’</span>
          <span>Privacy Policy</span>
        </a>

        <a href="{{ url_for('admin.site_settings') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.site_settings' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">âš™ï¸</span>
          <span>Site Settings</span>
        </a>
        
        <a href="{{ url_for('admin.stock_notify_list') }}"
           class="list-group-item list-group-item-action d-flex align-items-center
           {% if request.endpoint == 'admin.stock_notify_list' %}active bg-primary text-white fw-semibold{% endif %}">
          <span class="me-2">âš™ï¸</span>
          <span>Stock Notify List</span>
        </a>

      </div>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="col-md-9 col-lg-10 p-4 bg-light">
      {% block admin_content %}{% endblock %}
    </main>

  </div>
</div>

{% else %}
  <!-- Safety fallback -->
  <div class="container mt-5 text-center">
    <h4>Unauthorized</h4>
    <p>You do not have access to this page.</p>
  </div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
