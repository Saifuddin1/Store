<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{% block title %}Admin | {{ site_settings.site_name }}{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        rel="stylesheet">

  <!-- Bootstrap Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
        rel="stylesheet">

  <!-- Admin UI -->
  <link rel="stylesheet"
        href="{{ url_for('static', filename='css/admin-ui.css') }}">

  {% block extra_css %}{% endblock %}
</head>

<body>

{% if current_user.is_authenticated and current_user.is_admin %}

<!-- ===================== -->
<!-- TOP ADMIN NAVBAR -->
<!-- ===================== -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <div class="container-fluid px-4">

    <a class="navbar-brand d-flex align-items-center"
       href="{{ url_for('admin.dashboard') }}">
      {% if site_settings and site_settings.logo_light %}
        <img src="{{ url_for('static', filename=site_settings.logo_light) }}"
             height="36"
             class="me-2"
             alt="{{ site_settings.site_name }}">
      {% endif %}
      {{ site_settings.site_name }}
    </a>

    <button class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#adminNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="adminNavbar">
      <ul class="navbar-nav ms-auto">

        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'admin.dashboard' %}active{% endif %}"
             href="{{ url_for('admin.dashboard') }}">
            <i class="bi bi-speedometer2 me-1"></i> Dashboard
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'admin.analytics_dashboard' %}active{% endif %}"
             href="{{ url_for('admin.analytics_dashboard') }}">
            <i class="bi bi-bar-chart-line me-1"></i> Analytics
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'admin.orders' %}active{% endif %}"
             href="{{ url_for('admin.orders') }}">
            <i class="bi bi-box-seam me-1"></i> Orders
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link {% if request.endpoint == 'admin.products' %}active{% endif %}"
             href="{{ url_for('admin.products') }}">
            <i class="bi bi-bag me-1"></i> Products
          </a>
        </li>

        <li class="nav-item">
          <a class="nav-link admin-logout"
             href="{{ url_for('auth.logout') }}">
            <i class="bi bi-box-arrow-right me-1"></i> Logout
          </a>
        </li>

      </ul>
    </div>
  </div>
</nav>
{% include "layout/flash_messages.html" %}


<!-- ===================== -->
<!-- ADMIN LAYOUT -->
<!-- ===================== -->
<div class="container-fluid">
  <div class="row">

    <!-- ===== SIDEBAR ===== -->
    <aside class="col-md-3 col-lg-2 admin-sidebar min-vh-100 p-3">

      <h6 class="mb-3">Admin Panel</h6>

      <div class="list-group list-group-flush">

        <a href="{{ url_for('admin.edit_about_page') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.edit_about_page' %}active{% endif %}">
          <i class="bi bi-info-circle"></i>
          About Page
        </a>

        <a href="{{ url_for('admin.faq_list') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.faq_list' %}active{% endif %}">
          <i class="bi bi-question-circle"></i>
          FAQs
        </a>

        <a href="{{ url_for('admin.edit_terms_conditions') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.edit_terms_conditions' %}active{% endif %}">
          <i class="bi bi-file-earmark-text"></i>
          Terms & Conditions
        </a>

        <a href="{{ url_for('admin.edit_shipping_returns') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.edit_shipping_returns' %}active{% endif %}">
          <i class="bi bi-truck"></i>
          Shipping & Returns
        </a>

        <a href="{{ url_for('admin.edit_privacy_policy') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.edit_privacy_policy' %}active{% endif %}">
          <i class="bi bi-shield-lock"></i>
          Privacy Policy
        </a>

        <a href="{{ url_for('admin.site_settings') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.site_settings' %}active{% endif %}">
          <i class="bi bi-gear"></i>
          Site Settings
        </a>

        <a href="{{ url_for('admin.stock_notify_list') }}"
           class="list-group-item list-group-item-action
           {% if request.endpoint == 'admin.stock_notify_list' %}active{% endif %}">
          <i class="bi bi-bell"></i>
          Stock Notify
        </a>

      </div>
    </aside>

    <!-- ===== MAIN CONTENT ===== -->
    <main class="col-md-9 col-lg-10 p-4 admin-main">
      {% block admin_content %}{% endblock %}
    </main>

  </div>
</div>

{% else %}
<div class="container mt-5 text-center">
  <h4>Unauthorized</h4>
  <p>You do not have access to this page.</p>
</div>
{% endif %}

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
